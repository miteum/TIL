# JSP 

> HTML과 CSS와 자바스크립를 기반으로 JSP에서 제공하는 여러가지 구성 요소들을 사용해 화면을 구현 하는 기술
>
> 웹프로그램의 화면 기능과 MVC에서 뷰 기능을 담당
>



# Servlet 과 Jsp

1. JSP와 Servlet은 자바 기반으로 만들어진 웹 프로그래밍 언어입니다.

2. Servlet이 자바코드에 의존적이라면 JSP는 덜 의존적이라 프로그래밍하기가 더 쉽고 편합니다.

3. JSP와 Servlet은 같은 처리구조를 가집니다.

4. JSP는 실행시 Servlet으로 변환된다. 단 한 번만 서블릿으로 변경되면 코드를 수정하기 전까지 재 변환작업이 일어나지 않기 때문에 수행 속도 JSP나 서블릿 간에 별 차이가 없습니다.



출처: https://nevertrustbrutus.tistory.com/71 [FU11M00N]

### JSP의 구성요소

* HTML 태그, CSS , 자바스크립트
* JSP 기본 태그 
* JSP 액션 태그 
* 커스텀 태그 



### JSP의 변환과정

> JSP 파일 자체를 브라우저로 전송하면 브라우저는 JSP요소들을 인식하지 못함 

1. JSP파일을 자바 파일로 변환  > 변환단계
2. 자바코드를 컴파일 해서 서블릿 클래스 생성 > 컴파일 단계 
3. 서블릿에서 클라이언트 요청을 전달
4. 서블릿이 요청을 처리한 결과를 응답으로 생성
5. 전송 



### JSP 태그 

> Servlet은 JAVA 언어를 이용하여 문서를 작성하고 출력객체를 통하여 HTML 코드를 삽입했다면 JSP는 HTML코드에 JAVA언어를 삽입하여 동적 문서를 만들수 있다.

< 태그의 종류 > 

- 지시자  : <%@ %> --> 페이지 속성(.jsp 파일의 제일 상단에서 볼 수 있음)
- 주석   : <%-- --%> --> JSP의 주석은 HTML 주석과 다르게 브라우저에서 소스보기를 했을 때 보이지 않음
- 선언   : <%! %> --> 변수, 메소드 선언
- 표현식  : <%= %> --> 결과값 출력
- 스크립트릿 : <% %> --> JAVA 코드
- 액션태그   : <jsp:action> </jsp:action> --> 자바빈 연결



개발자가 객체를 생성하지 않고 바로 사용할 수 있는 객체로 JSP에서 제공되는 내부객체는 JSP컨테이너에 의해 Servlet으로 변화될 때 자동으로 객체가 생성된다

## <내부 객체 종류>

1. request

\- 브라우저에서 보낸 요청으로, HTML 폼 요소의 선택 값 등 사용자 입력 정보를 읽어올 때 사용한다.

2. response

\- 사용자의 요청에 대한 응답을 처리하기 위해 사용된다. 필요한 로직들을 처리한 뒤, 브라우저로 반환된다.

3. pageContext

\- 각종 기본 객체를 얻거나 forward 및 include 기능을 활용할 때 사용된다. 한 페이지 내에서만 사용할 수 있는 attribute 박스 같은 것? 이라고 생각하면 편리하다. 

4. session 

\- 클라이언트에 대한 세션 정보를 처리하기 위해 사용된다. 요청하고 응답하고 처리하는 도중에 계속해서 공유되는 영역이다. 브라우저 당 하나씩 존재하며, 브라우저가 꺼질 때 까지 유효하다. 로그인을 한번 하면 로그인 페이지를 벗어나도 그 사이트 모든 곳에서 로그인이 되어 있는 기능 등을 구현할 때 사용된다.

5. application

\- 웹 서버의 애플리케이션 처리와 관련된 정보를 레퍼런스 하기 위해 사용된다. 세션보다 하나 더 큰 개념으로, 모든 브라우저를 합친 것이라고 생각하면 된다. 사용자 A가 담아 놓은 자원을 사용자 B도 쓸 수 있다. 

6. out

\- 사용자에게 전달하기 위한 output 스트림을 처리할 때 사용된다. 

7. config

\- 현재 JSP에 대한 초기화 환경을 처리하기 위해 사용된다.

8. page

\- 현재 JSP 페이지에 대한 참조 변수에 해당된다.

9. exception

\- Error를 처리하는 JSP에서 isErrorPage 속성을 true로 설정하면 exception 내장 객체를 사용할 수 있고, 기본은 false로 설정되어 있다. 전달된 오류 정보를 담고 있는 내장 객체이다. 

---



# JSP 태그 기초

> JSP 스크립트 요소란 JSP 페이지에서 여러가지 동적 처리를 제공하는 기능으로 ,<% %> 기호 안에 자바 코드로 구현, 이 기호를 스크립트릿이라고 함 

* 선언문 :  변수나 메서드를 선언할때           ex)  <%! 자바 코드 %> 
* 스트립트릿 : 자바코드를 작성할 때      
* 표현식 : 변수의 값을 출력할 때 사용        ex) <%= 값 or 자바 변수 or 자바 식 %> --> 

``` 
<body>
<%
	int i = 0;
	while(true){
		i++;
		out.println("2 * " + i + " = " + (2 * i)  + "<br />");
%>
	=========<br />
<%
		if(i >= 9) break;
	}
%>
</body>      
```





< 주석>  

  **- HTML 주석** : 클라이언트에게 전달된다.   ex)    <!--  -->

  **- JSP 주석** : 클라이언트에게 전달되지 않는다.   ex)    <%--  --%>

  **- 스크립트 릿에서의 주석** : 자바 주석과 동일   ex ) //     /\* \*/    /\* \* \*/ 





# 내장 객체들의 스코프 (p.442)



- Page : 하나의 JSP페이지를 처리할 때 사용되는 영역. 요청한 페이지에서 보낸 값들을 담는 공간
- Request : 하나의 요청을 처리할 때 사용되는 영역. 요청한 페이지와 응답하는 페이지의 정보 둘다 담는다.
-  Session : 하나의 브라우저와 관련된 영역. 페이지가 넘어가도 로그인 상태가 계속 유지되려면 로그인 정보를 담는 큰 공간이 필요하다.
- Application : 하나의 웹 애플리케이션과 관련된 영역. 모든 사용자들이 공유해서 쓸 수 있는 영역이다.









